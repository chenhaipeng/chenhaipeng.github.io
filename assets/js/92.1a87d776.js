(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{574:function(s,n,a){"use strict";a.r(n);var t=a(21),e=Object(t.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"常用的docker-命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用的docker-命令"}},[s._v("#")]),s._v(" 常用的docker 命令")]),s._v(" "),a("p",[s._v("参考api  https://docs.docker.com/engine/reference/builder/")]),s._v(" "),a("h3",{attrs:{id:"arg"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#arg"}},[s._v("#")]),s._v(" ARG")]),s._v(" "),a("h3",{attrs:{id:"基础镜像制作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基础镜像制作"}},[s._v("#")]),s._v(" 基础镜像制作")]),s._v(" "),a("p",[s._v("https://blog.csdn.net/qq_29777207/article/details/113191341")]),s._v(" "),a("p",[s._v("http://www.dockone.io/article/8163")]),s._v(" "),a("p",[s._v("https://github.com/carlossg/docker-maven/blob/0a7b1ef030/openjdk-8-slim/mvn-entrypoint.sh")]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#登入软件源docker registry")]),s._v("\nsudo docker login "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("username xx "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("password xx \n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#从registry拉取镜像")]),s._v("\nsudo docker pull xxx/xx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("tag"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("复制\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#将镜像推送到registry")]),s._v("\nsudo docker tag "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("image_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" xxx/xx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("tag"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nsudo docker push xx/xx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("tag"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n\ndocker ps // 查看所有正在运行容器\ndocker stop containerId // containerId 是容器的ID\n\ndocker ps "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("a // 查看所有容器\ndocker ps "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("a "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("q // 查看所有容器ID\n\ndocker start $(docker ps "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("a "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("q) // start启动所有停止的容器\ndocker stop $(docker ps "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("a "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("q) // stop停止所有容器\ndocker rm $(docker ps "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("a "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("q) // remove删除所有容器\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装和启动docker run -d -p 8088:9000  --restart=always -v /var/run/docker.sock:/var/run/docker.sock --privileged=true ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#portainer/portainer启动访问地址：192.168.31.30:8088")]),s._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#1.docker images")]),s._v("\n查看镜像文件\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2.docker ps")]),s._v("\n查看正在运行的容器\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#3.docker ps –a")]),s._v("\n查看所有的容器\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#4.docker container exec -it f0b1c8ab3633 /bin/bash")]),s._v("\n进入到容器\n注意：f0b1c8ab3633 是容器id 根据自己启动容器来 填写自己的容器id\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#4.2正在启动的日志")]),s._v("\ndocker attach imageId\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#5.")]),s._v("\nexit\n退出\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#6.docker version")]),s._v("\n查看docker版本\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#7. 启动容器")]),s._v("\ndocker run "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("d "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("p 81"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("80 nginx\n     启动nginx容器\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#注意1： -d表示后台启动 不加-d是在前台启动。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#注意2: 81是对外接口 80是对内接口 进入容器里面用80访问")]),s._v("\n\ndocker start mysql 3308\n启动mysql\n注意：mysql3308 是容器名称 也可以是容器id\n\ndocker run 与docker start的区别\ndocker run 只在第一次运行时使用，将镜像放到容器中，以后再次启动这个容器时，只需要使用命令docker start\n即可。docker run相当于执行了两步操作：将镜像放入容器中（docker\ncreate）"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("然后将容器启动，使之变成运行时容器（docker start）。而docker\nstart的作用是，重新启动已存在的镜像。也就是说，如果使用这个命令，我们必须事先知道这个容器的ID，或者这个容器的名字，我们可以使用docker\nps找到这个容器的信息。\n\n\n\n8.docker rmi imgageid\n删除镜像\n\n9.docker rm 容器id\n删除容器\n注意：要删除镜像，要先删除其下的容器\n\n10.如果遇到问题，可以先停止运行，再删除，具体执行：\n\n\n11、windows的小伙伴可能会需要关掉防火墙\nservice iptables stop\n\nsduo systemctl restart docker 重启 docker\nservice iptables stop 关闭防火墙\ndocker images "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#列出本地images")]),s._v("\ndocker ps "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("q"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##查看正在运行的容器的ID")]),s._v("\ndocker ps\ndocker ps "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("a "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("q "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),s._v(" xargs docker rm 删除所有容器\ndocker attach 44fc0f0582d9 查看正在启动容器日志\ndocker stop $(docker ps "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("a "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("q) // stop停止所有容器\ndocker rm $(docker ps "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("a "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("q) // remove删除所有容器\ndocker start 8937c2a8a626 启动容器\ndocker exec "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("it 8937c2a8a626 bash 进入到容器中\ndocker logs "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("f "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("t "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("since=“2018"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("02"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("08” "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("tail=100 cce06fc3c633 查看容器中启动的日志\n————————————————\n版权声明：本文为CSDN博主「lvhy踩坑之路」的原创文章，遵循CC 4.0 BY"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("SA版权协议，转载请附上原文出处链接及本声明。\n原文链接：https"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("//blog.csdn.net/weixin_44722978/article/details/89704085\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br")])]),a("h2",{attrs:{id:"docker-案例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-案例"}},[s._v("#")]),s._v(" docker 案例")]),s._v(" "),a("h3",{attrs:{id:"before-multi-stage-builds"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#before-multi-stage-builds"}},[s._v("#")]),s._v(" Before multi-stage builds")]),s._v(" "),a("blockquote",[a("p",[s._v("https://docs.docker.com/develop/develop-images/multistage-build/")])]),s._v(" "),a("h3",{attrs:{id:"docker-images"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-images"}},[s._v("#")]),s._v(" docker images")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.cnblogs.com/quanxiaoha/p/10542278.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Docker 删除&清理镜像"),a("OutboundLink")],1)])]),s._v(" "),a("h3",{attrs:{id:"qa"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#qa"}},[s._v("#")]),s._v(" QA:")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("怎么嵌入另外的docker agent")])]),s._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://blog.csdn.net/tianlongtc/article/details/80092041",target:"_blank",rel:"noopener noreferrer"}},[s._v("docker RUN、CMD 和 ENTRYPOINT"),a("OutboundLink")],1)])]),s._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/59796137",target:"_blank",rel:"noopener noreferrer"}},[s._v("在entrypoint.sh中使用Tini的优势是什么"),a("OutboundLink")],1)])])])])}),[],!1,null,null,null);n.default=e.exports}}]);