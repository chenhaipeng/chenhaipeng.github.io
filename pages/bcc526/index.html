<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Elasticsearchå¸¸ç”¨å‘½ä»¤ | Hiper&#39;s blog</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/img/favicon.ico">
    <script data-ad-client="ca-pub-7828333725993554" async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <meta name="description" content="æŠ€æœ¯åšå®¢,ä¸“æ³¨æ‘¸é±¼">
    <meta name="keywords" content="javaã€goã€å¤§æ•°æ®ã€äº‘åŸç”Ÿ">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.fdc02eb1.css" as="style"><link rel="preload" href="/assets/js/app.d3e05205.js" as="script"><link rel="preload" href="/assets/js/2.fe8aed19.js" as="script"><link rel="preload" href="/assets/js/16.3a2f9fc9.js" as="script"><link rel="prefetch" href="/assets/js/10.07523ab0.js"><link rel="prefetch" href="/assets/js/100.3ec8fc98.js"><link rel="prefetch" href="/assets/js/101.b6dbcf2f.js"><link rel="prefetch" href="/assets/js/102.68005685.js"><link rel="prefetch" href="/assets/js/103.a7de64e5.js"><link rel="prefetch" href="/assets/js/104.b60ac8d6.js"><link rel="prefetch" href="/assets/js/105.de89b73c.js"><link rel="prefetch" href="/assets/js/106.3fea30ed.js"><link rel="prefetch" href="/assets/js/107.d5b4d80a.js"><link rel="prefetch" href="/assets/js/108.0d14d22f.js"><link rel="prefetch" href="/assets/js/109.6c86b7bc.js"><link rel="prefetch" href="/assets/js/11.e7c9ff68.js"><link rel="prefetch" href="/assets/js/110.bbcd4fc2.js"><link rel="prefetch" href="/assets/js/111.b8ba1824.js"><link rel="prefetch" href="/assets/js/112.7747a0cb.js"><link rel="prefetch" href="/assets/js/113.af2bbba1.js"><link rel="prefetch" href="/assets/js/114.9bcdd4d6.js"><link rel="prefetch" href="/assets/js/115.9aec1069.js"><link rel="prefetch" href="/assets/js/116.782e83e8.js"><link rel="prefetch" href="/assets/js/117.6aecceb2.js"><link rel="prefetch" href="/assets/js/118.1f15ab0c.js"><link rel="prefetch" href="/assets/js/119.d4069cc5.js"><link rel="prefetch" href="/assets/js/12.3881c5d2.js"><link rel="prefetch" href="/assets/js/120.c20a4bea.js"><link rel="prefetch" href="/assets/js/121.f53acd71.js"><link rel="prefetch" href="/assets/js/122.5edd8a9d.js"><link rel="prefetch" href="/assets/js/123.e9bddb25.js"><link rel="prefetch" href="/assets/js/124.55ba84d3.js"><link rel="prefetch" href="/assets/js/125.8cc1b6e2.js"><link rel="prefetch" href="/assets/js/126.f5f4d974.js"><link rel="prefetch" href="/assets/js/127.986ef6a0.js"><link rel="prefetch" href="/assets/js/128.d4ddc101.js"><link rel="prefetch" href="/assets/js/13.48b00a83.js"><link rel="prefetch" href="/assets/js/14.aff37911.js"><link rel="prefetch" href="/assets/js/15.d06f7fce.js"><link rel="prefetch" href="/assets/js/17.05769f3c.js"><link rel="prefetch" href="/assets/js/18.1c7dd6ba.js"><link rel="prefetch" href="/assets/js/19.367be8a9.js"><link rel="prefetch" href="/assets/js/20.bcf3c951.js"><link rel="prefetch" href="/assets/js/21.831e505c.js"><link rel="prefetch" href="/assets/js/22.ef34e56c.js"><link rel="prefetch" href="/assets/js/23.2d2c0580.js"><link rel="prefetch" href="/assets/js/24.c318ecf7.js"><link rel="prefetch" href="/assets/js/25.42b3da43.js"><link rel="prefetch" href="/assets/js/26.f265b53a.js"><link rel="prefetch" href="/assets/js/27.ef8e6c69.js"><link rel="prefetch" href="/assets/js/28.457f1560.js"><link rel="prefetch" href="/assets/js/29.42224867.js"><link rel="prefetch" href="/assets/js/3.53741393.js"><link rel="prefetch" href="/assets/js/30.0530d84e.js"><link rel="prefetch" href="/assets/js/31.a930af92.js"><link rel="prefetch" href="/assets/js/32.2441b370.js"><link rel="prefetch" href="/assets/js/33.c34bff9e.js"><link rel="prefetch" href="/assets/js/34.c8d0bb4c.js"><link rel="prefetch" href="/assets/js/35.fa9bcd14.js"><link rel="prefetch" href="/assets/js/36.1085711f.js"><link rel="prefetch" href="/assets/js/37.0031df00.js"><link rel="prefetch" href="/assets/js/38.c6270cec.js"><link rel="prefetch" href="/assets/js/39.56ae6fdc.js"><link rel="prefetch" href="/assets/js/4.9aa31843.js"><link rel="prefetch" href="/assets/js/40.e5ecf5a1.js"><link rel="prefetch" href="/assets/js/41.3a159d08.js"><link rel="prefetch" href="/assets/js/42.8a712434.js"><link rel="prefetch" href="/assets/js/43.2bfb408c.js"><link rel="prefetch" href="/assets/js/44.e18962ee.js"><link rel="prefetch" href="/assets/js/45.e5b3d10a.js"><link rel="prefetch" href="/assets/js/46.4e306e11.js"><link rel="prefetch" href="/assets/js/47.35d36bec.js"><link rel="prefetch" href="/assets/js/48.fab1e7e5.js"><link rel="prefetch" href="/assets/js/49.6129f567.js"><link rel="prefetch" href="/assets/js/5.4a96f8fa.js"><link rel="prefetch" href="/assets/js/50.254ebb8c.js"><link rel="prefetch" href="/assets/js/51.6cf7da72.js"><link rel="prefetch" href="/assets/js/52.560bd9ad.js"><link rel="prefetch" href="/assets/js/53.c0aa255d.js"><link rel="prefetch" href="/assets/js/54.693cbdbd.js"><link rel="prefetch" href="/assets/js/55.61d98229.js"><link rel="prefetch" href="/assets/js/56.c0cb425d.js"><link rel="prefetch" href="/assets/js/57.61a0edfe.js"><link rel="prefetch" href="/assets/js/58.2135ea1a.js"><link rel="prefetch" href="/assets/js/59.31fd0bf4.js"><link rel="prefetch" href="/assets/js/6.3b27ecc2.js"><link rel="prefetch" href="/assets/js/60.c3efaefc.js"><link rel="prefetch" href="/assets/js/61.26492940.js"><link rel="prefetch" href="/assets/js/62.917db43b.js"><link rel="prefetch" href="/assets/js/63.27a5485d.js"><link rel="prefetch" href="/assets/js/64.26333676.js"><link rel="prefetch" href="/assets/js/65.68c9e125.js"><link rel="prefetch" href="/assets/js/66.086a9190.js"><link rel="prefetch" href="/assets/js/67.b45a4b78.js"><link rel="prefetch" href="/assets/js/68.b0c264f5.js"><link rel="prefetch" href="/assets/js/69.9f4e6bcb.js"><link rel="prefetch" href="/assets/js/7.79539e00.js"><link rel="prefetch" href="/assets/js/70.bfb241d7.js"><link rel="prefetch" href="/assets/js/71.ba7d3a07.js"><link rel="prefetch" href="/assets/js/72.751a2acd.js"><link rel="prefetch" href="/assets/js/73.c79db6e4.js"><link rel="prefetch" href="/assets/js/74.f8d0241b.js"><link rel="prefetch" href="/assets/js/75.52a047a2.js"><link rel="prefetch" href="/assets/js/76.d60812c5.js"><link rel="prefetch" href="/assets/js/77.3cb4d227.js"><link rel="prefetch" href="/assets/js/78.41b3a677.js"><link rel="prefetch" href="/assets/js/79.d5ebc17b.js"><link rel="prefetch" href="/assets/js/8.56b87b81.js"><link rel="prefetch" href="/assets/js/80.84467a30.js"><link rel="prefetch" href="/assets/js/81.51f88037.js"><link rel="prefetch" href="/assets/js/82.2a4afb79.js"><link rel="prefetch" href="/assets/js/83.bf558daa.js"><link rel="prefetch" href="/assets/js/84.319a1e12.js"><link rel="prefetch" href="/assets/js/85.1ccbcd3e.js"><link rel="prefetch" href="/assets/js/86.9ae04c7e.js"><link rel="prefetch" href="/assets/js/87.bd87229a.js"><link rel="prefetch" href="/assets/js/88.e1bd102c.js"><link rel="prefetch" href="/assets/js/89.6922ceb2.js"><link rel="prefetch" href="/assets/js/9.cc927642.js"><link rel="prefetch" href="/assets/js/90.0475148c.js"><link rel="prefetch" href="/assets/js/91.d1d95ef3.js"><link rel="prefetch" href="/assets/js/92.1a87d776.js"><link rel="prefetch" href="/assets/js/93.6b5a0db5.js"><link rel="prefetch" href="/assets/js/94.c44fe8e6.js"><link rel="prefetch" href="/assets/js/95.d2fdc4a0.js"><link rel="prefetch" href="/assets/js/96.f5236967.js"><link rel="prefetch" href="/assets/js/97.46798252.js"><link rel="prefetch" href="/assets/js/98.09bfce21.js"><link rel="prefetch" href="/assets/js/99.004ad8b0.js">
    <link rel="stylesheet" href="/assets/css/0.styles.fdc02eb1.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="ç›®å½•" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Hiper's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="åç«¯" class="dropdown-title"><a href="/backend/" class="link-title">åç«¯</a> <span class="title" style="display:none;">åç«¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>åç«¯æ–‡ç« </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/7e9402/" class="nav-link">Java</a></li></ul></li><li class="dropdown-item"><h4>å­¦ä¹ ç¬”è®°</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/go/" class="nav-link">ã€ŠGoã€‹å­¦ä¹ ç¬”è®°</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å¤§æ•°æ®" class="dropdown-title"><a href="/bigdata/" class="link-title">å¤§æ•°æ®</a> <span class="title" style="display:none;">å¤§æ•°æ®</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>å¤§æ•°æ®æ–‡ç« </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/bcc526/" aria-current="page" class="nav-link router-link-exact-active router-link-active">Elasticsearch</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="äº‘åŸç”Ÿ" class="dropdown-title"><a href="/cloud/" class="link-title">äº‘åŸç”Ÿ</a> <span class="title" style="display:none;">äº‘åŸç”Ÿ</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>äº‘åŸç”Ÿæ–‡ç« </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/2e4348/" class="nav-link">docker</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å¼€æºååŒ" class="dropdown-title"><a href="/opensource/" class="link-title">å¼€æºååŒ</a> <span class="title" style="display:none;">å¼€æºååŒ</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>é¡¹ç›®</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/skywalking/" class="nav-link">skywalking</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ•ˆç‡å·¥å…·" class="dropdown-title"><a href="/tools/" class="link-title">æ•ˆç‡å·¥å…·</a> <span class="title" style="display:none;">æ•ˆç‡å·¥å…·</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>å­¦ä¹ ç¬”è®°</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/git/" class="nav-link">ã€ŠGitã€‹å­¦ä¹ ç¬”è®°</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç´¢å¼•" class="dropdown-title"><a href="/archives/" class="link-title">ç´¢å¼•</a> <span class="title" style="display:none;">ç´¢å¼•</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">åˆ†ç±»</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">æ ‡ç­¾</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">å½’æ¡£</a></li></ul></div></div> <a href="https://github.com/chenhaipeng" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://blog-1305251267.cos.ap-shenzhen-fsi.myqcloud.com/img/1.jpeg"> <div class="blogger-info"><h3>Hiper</h3> <span>æ‘¸é±¼å¤§èµ›ğŸ†</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="åç«¯" class="dropdown-title"><a href="/backend/" class="link-title">åç«¯</a> <span class="title" style="display:none;">åç«¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>åç«¯æ–‡ç« </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/7e9402/" class="nav-link">Java</a></li></ul></li><li class="dropdown-item"><h4>å­¦ä¹ ç¬”è®°</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/go/" class="nav-link">ã€ŠGoã€‹å­¦ä¹ ç¬”è®°</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å¤§æ•°æ®" class="dropdown-title"><a href="/bigdata/" class="link-title">å¤§æ•°æ®</a> <span class="title" style="display:none;">å¤§æ•°æ®</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>å¤§æ•°æ®æ–‡ç« </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/bcc526/" aria-current="page" class="nav-link router-link-exact-active router-link-active">Elasticsearch</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="äº‘åŸç”Ÿ" class="dropdown-title"><a href="/cloud/" class="link-title">äº‘åŸç”Ÿ</a> <span class="title" style="display:none;">äº‘åŸç”Ÿ</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>äº‘åŸç”Ÿæ–‡ç« </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/2e4348/" class="nav-link">docker</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å¼€æºååŒ" class="dropdown-title"><a href="/opensource/" class="link-title">å¼€æºååŒ</a> <span class="title" style="display:none;">å¼€æºååŒ</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>é¡¹ç›®</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/skywalking/" class="nav-link">skywalking</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ•ˆç‡å·¥å…·" class="dropdown-title"><a href="/tools/" class="link-title">æ•ˆç‡å·¥å…·</a> <span class="title" style="display:none;">æ•ˆç‡å·¥å…·</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>å­¦ä¹ ç¬”è®°</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/git/" class="nav-link">ã€ŠGitã€‹å­¦ä¹ ç¬”è®°</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç´¢å¼•" class="dropdown-title"><a href="/archives/" class="link-title">ç´¢å¼•</a> <span class="title" style="display:none;">ç´¢å¼•</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">åˆ†ç±»</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">æ ‡ç­¾</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">å½’æ¡£</a></li></ul></div></div> <a href="https://github.com/chenhaipeng" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Elasticsearchæ–‡ç« </span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/aa5cb7/" class="sidebar-link">Elasticsearch æ¶æ„</a></li><li><a href="/pages/bcc526/" aria-current="page" class="active sidebar-link">Elasticsearchå¸¸ç”¨å‘½ä»¤</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/bcc526/#curlè¯­æ³•è®²è§£" class="sidebar-link">CURLè¯­æ³•è®²è§£</a></li><li class="sidebar-sub-header level2"><a href="/pages/bcc526/#é›†ç¾¤ç®¡æ§" class="sidebar-link">é›†ç¾¤ç®¡æ§</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/bcc526/#cat" class="sidebar-link">_cat</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/bcc526/#æ–‡æ¡£å¤„ç†" class="sidebar-link">æ–‡æ¡£å¤„ç†</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/bcc526/#elasticsearch-curdè¯­æ³•" class="sidebar-link">Elasticsearch CURDè¯­æ³•</a></li><li class="sidebar-sub-header level3"><a href="/pages/bcc526/#createåˆ›å»ºç´¢å¼•åŠæ–‡æ¡£" class="sidebar-link">Createåˆ›å»ºç´¢å¼•åŠæ–‡æ¡£</a></li><li class="sidebar-sub-header level3"><a href="/pages/bcc526/#indexåˆ›å»ºç´¢å¼•æ–‡æ¡£æˆ–æ›´æ–°" class="sidebar-link">Indexåˆ›å»ºç´¢å¼•æ–‡æ¡£æˆ–æ›´æ–°</a></li><li class="sidebar-sub-header level3"><a href="/pages/bcc526/#readæŸ¥è¯¢æ–‡æ¡£" class="sidebar-link">ReadæŸ¥è¯¢æ–‡æ¡£</a></li><li class="sidebar-sub-header level3"><a href="/pages/bcc526/#updateæ›´æ–°æ–‡æ¡£" class="sidebar-link">Updateæ›´æ–°æ–‡æ¡£</a></li><li class="sidebar-sub-header level3"><a href="/pages/bcc526/#deleteåˆ é™¤æ–‡æ¡£" class="sidebar-link">Deleteåˆ é™¤æ–‡æ¡£</a></li><li class="sidebar-sub-header level3"><a href="/pages/bcc526/#bulk-api-æ‰¹é‡æ“ä½œ" class="sidebar-link">Bulk API æ‰¹é‡æ“ä½œ</a></li><li class="sidebar-sub-header level3"><a href="/pages/bcc526/#mget-æ‰¹é‡è¯»å–" class="sidebar-link">MGET æ‰¹é‡è¯»å–</a></li><li class="sidebar-sub-header level3"><a href="/pages/bcc526/#msearch-æ‰¹é‡æŸ¥è¯¢" class="sidebar-link">MSEARCH æ‰¹é‡æŸ¥è¯¢</a></li><li class="sidebar-sub-header level3"><a href="/pages/bcc526/#å¸¸è§é”™è¯¯è¿”å›" class="sidebar-link">å¸¸è§é”™è¯¯è¿”å›</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/bcc526/#å¸¸ç”¨å¿«æ·shellå¤„ç†" class="sidebar-link">å¸¸ç”¨å¿«æ·shellå¤„ç†</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/bcc526/#æ‰¹é‡é™å‰¯æœ¬" class="sidebar-link">æ‰¹é‡é™å‰¯æœ¬</a></li><li class="sidebar-sub-header level3"><a href="/pages/bcc526/#åˆ›å»ºè´¦å·å¯†ç " class="sidebar-link">åˆ›å»ºè´¦å·å¯†ç </a></li><li class="sidebar-sub-header level3"><a href="/pages/bcc526/#æ¸…ç†ç´¢å¼•" class="sidebar-link">æ¸…ç†ç´¢å¼•</a></li><li class="sidebar-sub-header level3"><a href="/pages/bcc526/#ç»Ÿè®¡æŸç±»ç´¢å¼•ç©ºé—´å¤§å°" class="sidebar-link">ç»Ÿè®¡æŸç±»ç´¢å¼•ç©ºé—´å¤§å°</a></li><li class="sidebar-sub-header level3"><a href="/pages/bcc526/#elasticsearchæŸ¥è¯¢æ–‡æ¡£æ€»æ•°" class="sidebar-link">ElasticsearchæŸ¥è¯¢æ–‡æ¡£æ€»æ•°</a></li></ul></li></ul></li><li><a href="/pages/c0183f/" class="sidebar-link">Elasticsearch é›†ç¾¤è¿ç§»</a></li><li><a href="/pages/66fb7f/" class="sidebar-link">Elasticsearch èšåˆæœç´¢</a></li><li><a href="/pages/c906ba/" class="sidebar-link">Elasticsearch å¸¸è§é—®é¢˜ä¸è¸©å‘</a></li><li><a href="/pages/84d4c3/" class="sidebar-link">Elasticsearch éªšæ“ä½œéœ€æ±‚åœºæ™¯</a></li><li><a href="/pages/7a2a1c/" class="sidebar-link">Elasticsearch grok</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Flink</span> <span class="arrow right"></span></p> <!----></section></li></ul> <div class="sidebar-slot sidebar-slot-bottom"><!-- æ­£æ–¹å½¢ -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="3508773082"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div></aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-1baff76c><div class="articleInfo" data-v-1baff76c><ul class="breadcrumbs" data-v-1baff76c><li data-v-1baff76c><a href="/" title="é¦–é¡µ" class="iconfont icon-home router-link-active" data-v-1baff76c></a></li> <li data-v-1baff76c><a href="/bigdata/#å¤§æ•°æ®" data-v-1baff76c>å¤§æ•°æ®</a></li><li data-v-1baff76c><a href="/bigdata/#Elasticsearchæ–‡ç« " data-v-1baff76c>Elasticsearchæ–‡ç« </a></li></ul> <div class="info" data-v-1baff76c><div title="ä½œè€…" class="author iconfont icon-touxiang" data-v-1baff76c><a href="https://github.com/chenhaipeng" target="_blank" title="ä½œè€…" class="beLink" data-v-1baff76c>Hiper</a></div> <div title="åˆ›å»ºæ—¶é—´" class="date iconfont icon-riqi" data-v-1baff76c><a href="javascript:;" data-v-1baff76c>2021-07-20</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">ç›®å½•</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">Elasticsearchå¸¸ç”¨å‘½ä»¤<!----></h1> <div class="page-slot page-slot-top"><!-- å›ºå®š100% * 90pxå¯æ˜¾ç¤ºï¼Œmax-height:90pxæœªè§æ˜¾ç¤º-->
     <ins class="adsbygoogle"
          style="display:inline-block;width:100%;max-height:90px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6625304284"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="theme-vdoing-content content__default"><h1 id="elasticsearchå¸¸ç”¨å‘½ä»¤"><a href="#elasticsearchå¸¸ç”¨å‘½ä»¤" class="header-anchor">#</a> Elasticsearchå¸¸ç”¨å‘½ä»¤</h1> <blockquote><ul><li>å‚è€ƒæ–‡æ¡£ï¼šhttps://www.elastic.co/guide/en/elasticsearch/reference/current/index.html</li> <li>ElasticsearchåŸºæœ¬CURDæ“ä½œ https://zhuanlan.zhihu.com/p/162699921</li></ul></blockquote> <h2 id="curlè¯­æ³•è®²è§£"><a href="#curlè¯­æ³•è®²è§£" class="header-anchor">#</a> <strong>CURLè¯­æ³•è®²è§£</strong></h2> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>RESTful API:
        <span class="token function">curl</span>  -X<span class="token operator">&lt;</span>VERB<span class="token operator">&gt;</span> <span class="token string">'&lt;PROTOCOL&gt;://&lt;HOST&gt;:&lt;PORT&gt;/&lt;PATH&gt;?&lt;QUERY_STRING&gt;'</span> -d <span class="token string">'&lt;BODY&gt;'</span>
        -Xï¼šæŒ‡å®šè¯·æ±‚æ–¹å¼
            
        <span class="token operator">&lt;</span>VERB<span class="token operator">&gt;</span>ï¼šGET,POST,PUT,DELETE   ä¸€èˆ¬è¯·æ±‚ä¸ºGETã€æäº¤å˜æ›´ä¸ºPOSTã€ä¸Šä¼ æ–‡ä»¶ä¸ºPUTã€åˆ é™¤æ“ä½œä¸ºDELETE
            
        <span class="token operator">&lt;</span>PROTOCOL<span class="token operator">&gt;</span>ï¼šåè®®ï¼Œä¸€èˆ¬ä¸ºHTTPåè®®
                
        <span class="token operator">&lt;</span>HOST<span class="token operator">&gt;</span>ï¼šä¸»æœºï¼Œå¯ä¸ºä¸»æœºçš„IPåœ°å€æˆ–Hostname
            
        <span class="token operator">&lt;</span>PORT<span class="token operator">&gt;</span>ï¼šä¸»æœºç«¯å£
            
        <span class="token operator">&lt;</span><span class="token environment constant">PATH</span><span class="token operator">&gt;</span>ï¼šè·¯å¾„ï¼Œä¸»æœºç«¯å£åçš„è·¯å¾„ï¼Œå¦‚ä¸‹å‡ ä¸ªè·¯å¾„ï¼š/_cat, /_search, /_cluster   /_catè·¯å¾„è¦†ç›–äº†å¤§å¤šæ•°çš„ä¿¡æ¯å†…å®¹,/_searchä¸ºæœç´¢æ‰€æœ‰çš„ç´¢å¼•å’Œæ–‡æ¡£ç±»å‹
            
        <span class="token operator">&lt;</span>QUERY_STRING<span class="token operator">&gt;</span>ï¼šæŸ¥è¯¢å­—ç¬¦ä¸²åŒ¹é…è§„åˆ™
            
        -dï¼šæŒ‡å®šä¸»ä½“å†…å®¹
            
        <span class="token operator">&lt;</span>BODY<span class="token operator">&gt;</span>ï¼šjsonæ ¼å¼çš„è¯·æ±‚ä¸»ä½“
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="é›†ç¾¤ç®¡æ§"><a href="#é›†ç¾¤ç®¡æ§" class="header-anchor">#</a> é›†ç¾¤ç®¡æ§</h2> <h3 id="cat"><a href="#cat" class="header-anchor">#</a> _cat</h3> <blockquote><p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.13/cat-health.html" target="_blank" rel="noopener noreferrer">_cat<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> æ³¨æ„æŸ¥çœ‹é›†ç¾¤ç›‘æ§ä¿¡æ¯ã€ä¾‹å¦‚é›†ç¾¤å¥åº·ï¼Œç´¢å¼•ç£ç›˜å¤§å°ç­‰,æ¯”è¾ƒå¸¸ç”¨çš„å‘½ä»¤</p></blockquote> <h4 id="ç´¢å¼•"><a href="#ç´¢å¼•" class="header-anchor">#</a> ç´¢å¼•</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#æŸ¥è¯¢å ç”¨ç©ºé—´å¤§ç´¢å¼•å­˜å­˜å‚¨</span>
GET /_cat/indices/*?v<span class="token operator">&amp;</span><span class="token assign-left variable">s</span><span class="token operator">=</span>store.size:desc
<span class="token comment">#æˆ–è€…</span>
<span class="token function">curl</span> <span class="token string">'http://localhost:9200/_cat/indices?v'</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token function">open</span> <span class="token operator">|</span> <span class="token function">sort</span> -k9
<span class="token comment">#æˆ–è€…</span>
GET /_cat/indices?v<span class="token operator">&amp;</span><span class="token assign-left variable">health</span><span class="token operator">=</span>green
<span class="token comment">#æŒ‰ç…§æ–‡æ¡£æ•°é‡æ’åºç´¢å¼•</span>
GET _cat/indices?v<span class="token operator">&amp;</span><span class="token assign-left variable">s</span><span class="token operator">=</span>docs.count:desc
<span class="token comment">#æŸ¥çœ‹å„ä¸ªç´¢å¼•å ç”¨å†…å­˜å¤§å°å¹¶è¿›è¡Œæ’åº</span>
GET /_cat/indices?v<span class="token operator">&amp;</span><span class="token assign-left variable">h</span><span class="token operator">=</span>i,tm<span class="token operator">&amp;</span><span class="token assign-left variable">s</span><span class="token operator">=</span>tm:desc
<span class="token comment">#æŸ¥çœ‹å•ä¸ªç´¢å¼•ä¿¡æ¯</span>
GET /_cat/indices/movies?v
<span class="token comment">#æŸ¥çœ‹æŒ‡å®šç´¢å¼•æ–‡æ¡£æ€»æ•°</span>
GET movies/_count
<span class="token comment">#æŸ¥çœ‹moviesç´¢å¼•å…ƒæ•°æ® mapping setting ç­‰å®šä¹‰</span>
GET movies
<span class="token comment">#æŸ¥çœ‹æ¨¡æ¿</span>
GET _cat/templates 
GET /_template/template_1
æˆ–è€…
GET /_index_template/template_1
<span class="token comment"># æ›´æ–°æ¨¡æ¿</span>
PUT /_index_template/template_1
<span class="token punctuation">{</span>
  <span class="token string">&quot;index_patterns&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token string">&quot;te*&quot;</span><span class="token punctuation">]</span>,
  <span class="token string">&quot;priority&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
  <span class="token string">&quot;template&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;settings&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;number_of_shards&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
æˆ–è€…
PUT _template/template_1
<span class="token punctuation">{</span>
  <span class="token string">&quot;index_patterns&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token string">&quot;te*&quot;</span>, <span class="token string">&quot;bar*&quot;</span><span class="token punctuation">]</span>,
  <span class="token string">&quot;settings&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;number_of_shards&quot;</span><span class="token builtin class-name">:</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>,
  <span class="token string">&quot;mappings&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;_source&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;enabled&quot;</span><span class="token builtin class-name">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>,
    <span class="token string">&quot;properties&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;host_name&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;type&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;keyword&quot;</span>
      <span class="token punctuation">}</span>,
      <span class="token string">&quot;created_at&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;type&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;date&quot;</span>,
        <span class="token string">&quot;format&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;EEE MMM dd HH:mm:ss Z yyyy&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br></div></div><h4 id="é›†ç¾¤"><a href="#é›†ç¾¤" class="header-anchor">#</a> é›†ç¾¤</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#æŸ¥çœ‹é›†ç¾¤çŠ¶æ€</span>
GET /_cat/health?v<span class="token operator">=</span>true
GET _cluster/health
<span class="token comment">#é›†ç¾¤åœæœºå‡çº§çš„æ—¶å€™æ¯”è¾ƒæœ‰ç”¨ï¼Œæˆ–è€…</span>
<span class="token keyword">while</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token function">curl</span> localhost:9200/_cat/health<span class="token punctuation">;</span> <span class="token function">sleep</span> <span class="token number">120</span><span class="token punctuation">;</span> <span class="token keyword">done</span>

<span class="token comment">#æŸ¥çœ‹ä¸»èŠ‚ç‚¹ä¿¡æ¯</span>
kibana: GET /_cat/master?v
bash: <span class="token function">curl</span> -XGET -u elastic:26tBktGolYCyZD2pPISW <span class="token string">'http://localhost:9200/_cat/master?v'</span>

<span class="token comment">#æŸ¥çœ‹é›†ç¾¤æ‰€æœ‰èŠ‚ç‚¹</span>
GET /_cat/nodes?v

<span class="token comment">#æŸ¥çœ‹å•ä¸ªç´¢å¼•åˆ†ç‰‡ä¿¡æ¯</span>
GET /_cat/shards/movies?v

<span class="token comment">#æŸ¥çœ‹æ’ä»¶</span>
GET /_cat/plugins?v

<span class="token comment">#æŸ¥çœ‹æ‰€æœ‰ç´¢å¼•æ–‡æ¡£æ€»æ•°</span>
GET _all/_count

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="æ–‡æ¡£å¤„ç†"><a href="#æ–‡æ¡£å¤„ç†" class="header-anchor">#</a> æ–‡æ¡£å¤„ç†</h2> <h3 id="elasticsearch-curdè¯­æ³•"><a href="#elasticsearch-curdè¯­æ³•" class="header-anchor">#</a> <strong>Elasticsearch CURDè¯­æ³•</strong></h3> <p><strong>CURDè¯·æ±‚æ–¹å¼ä¸»ä½“è¯´æ˜</strong></p> <p><strong>Create</strong> <code>PUT/index/_create/id</code>æŒ‡å®šDocument IDï¼Œåˆ›å»ºæ–‡æ¡£ï¼Œå¦‚æœIDå·²å­˜åœ¨ï¼Œåˆ™å¤±è´¥<strong>Create</strong> <code>POST/index/_create/id</code>æŒ‡å®šDocument IDï¼Œåˆ›å»ºæ–‡æ¡£ï¼Œå¦‚æœIDå·²å­˜åœ¨ï¼Œåˆ™å¤±è´¥<strong>Create</strong> <code>POST/index/_doc</code>è‡ªåŠ¨ç”ŸæˆIDï¼Œä¸ä¼šé‡å¤ï¼Œé‡å¤æäº¤åˆ™åˆ›å»ºå¤šä¸ªæ–‡æ¡£ï¼Œæ–‡æ¡£ç‰ˆæœ¬éƒ½ä¸º1,<code>Index PUT/index/_doc/id</code>å¦‚æœIDä¸å­˜åœ¨,åˆ™åˆ›å»ºæ–°çš„æ–‡æ¡£,å¦‚æœIDå­˜åœ¨,åˆ™åˆ é™¤ç°æœ‰æ–‡æ¡£ååˆ›å»ºæ–°çš„æ–‡æ¡£,ç‰ˆæœ¬+1,IDç›¸åŒ<code>Index POST/index/_doc/id</code>å¦‚æœIDä¸å­˜åœ¨,åˆ™åˆ›å»ºæ–°çš„æ–‡æ¡£,å¦‚æœIDå­˜åœ¨,åˆ™åˆ é™¤ç°æœ‰æ–‡æ¡£ååˆ›å»ºæ–°çš„æ–‡æ¡£,ç‰ˆæœ¬+1,IDç›¸åŒ<code>Read GET/index/_doc/id</code>æŸ¥çœ‹Document IDä¸º1çš„æ–‡æ¡£<strong>Update</strong> <code>POST/index/_doc/id</code>æ–‡æ¡£å¿…é¡»å­˜åœ¨,å¦åˆ™æ›´æ–°å¤±è´¥,åªèƒ½å¢é‡ä¿®æ”¹å­—æ®µ,ä¸èƒ½å‡å°‘å­—æ®µ,å­—æ®µå€¼å¯ä»¥éšæ„ä¿®æ”¹,ç‰ˆæœ¬åŠ 1ï¼Œ<strong>Delete</strong> <code>Delete/index/_doc/id</code>æ–‡æ¡£å¿…é¡»å­˜åœ¨,å¦åˆ™åˆ é™¤è¿”å›&quot;not_found&quot; <strong>Delete</strong> <code>Delete/index</code>åˆ é™¤ç´¢å¼•ï¼Œç´¢å¼•å†…çš„æ–‡æ¡£ä¹Ÿä¼šè¢«éšä¹‹è€Œåˆ é™¤,è¦åˆ é™¤çš„ç´¢å¼•å¿…é¡»å­˜åœ¨,å¦åˆ™è¿”å› &quot;404&quot;</p> <h3 id="createåˆ›å»ºç´¢å¼•åŠæ–‡æ¡£"><a href="#createåˆ›å»ºç´¢å¼•åŠæ–‡æ¡£" class="header-anchor">#</a> <strong>Createåˆ›å»ºç´¢å¼•åŠæ–‡æ¡£</strong></h3> <p>Createä¸€ä¸ªæ–‡æ¡£æ—¶ï¼ŒElasticsearchæ”¯æŒè‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£IDå’ŒæŒ‡å®šæ–‡æ¡£IDä¸¤ç§æ–¹å¼ã€‚</p> <ol><li>é€šè¿‡è°ƒç”¨ <code>POST /index/_doc</code> è¯­æ³•ï¼Œç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£Document IDã€‚æ­¤ç§æ–¹æ³•ï¼Œå³ä½¿åˆ›å»ºçš„JSONæ–‡æ¡£é‡å¤ï¼ŒDocument IDä¹Ÿä¸ä¸€è‡´ï¼Œå¦‚æœé‡å¤ä½¿ç”¨POSTå¤šæ¬¡æäº¤ï¼ŒElasticsearchå°†ä¼šåˆ›å»ºå¤šä¸ªå†…å®¹é‡å¤ä½†IDä¸ä¸€è‡´çš„æ–‡æ¡£ã€‚</li> <li>é€šè¿‡è°ƒç”¨ <code>POST /index/_create/id</code>æˆ–<code>PUT /index/_create/id</code>è¯­æ³•ï¼Œåˆ™æ‰‹åŠ¨æŒ‡å®šç”ŸæˆDocument IDï¼Œæ­¤ç§æ–¹æ³•ï¼Œå¦‚æœæˆ‘ä»¬æŒ‡å®šIDçš„æ–‡æ¡£å·²å­˜åœ¨ï¼Œåˆ™åˆ›å»ºå¤±è´¥ï¼Œåæ­£åˆ›å»ºæ–‡æ¡£ã€‚</li></ol> <p><strong>å®ä¾‹</strong> <code>è‡ªåŠ¨ç”Ÿæˆ Document ID</code></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#Kibanaè¯­æ³•</span>
POST /index/_doc
<span class="token punctuation">{</span>
  <span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;WeiLiang Xu&quot;</span>,
  <span class="token string">&quot;Blogs&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;abcops.cn&quot;</span>,
  <span class="token string">&quot;Is male&quot;</span><span class="token builtin class-name">:</span> true,
  <span class="token string">&quot;age&quot;</span><span class="token builtin class-name">:</span> <span class="token number">25</span>
<span class="token punctuation">}</span>

<span class="token comment">#Bashè¯­æ³•</span>
<span class="token function">curl</span> -XPOST -u elastic:26tBktGolYCyZD2pPISW -H <span class="token string">&quot;Content-Type:application/json&quot;</span> <span class="token string">'http://192.168.31.215:9201/index/_doc?pretty'</span> -d <span class="token string">'
{
  &quot;name&quot;: &quot;WeiLiang Xu&quot;,
  &quot;Blogs&quot;: &quot;abcops.cn&quot;,
  &quot;Is male&quot;: true,
  &quot;age&quot;: 25
}
POST è¯·æ±‚æŒ‡å®š Document ID
#Kibana POSTè¯·æ±‚è¯­æ³•
POST /index/_create/1
{
  &quot;name&quot;: &quot;WeiLiang Xu&quot;,
  &quot;Blogs&quot;: &quot;abcops.cn&quot;,
  &quot;Is male&quot;: true,
  &quot;age&quot;: 25
}

#Bash POSTè¯·æ±‚è¯­æ³•
curl -XPOST -u elastic:26tBktGolYCyZD2pPISW -H &quot;Content-Type:application/json&quot; '</span>http://192.168.31.215:9201/index/_create/1?pretty<span class="token string">' -d '</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;WeiLiang Xu&quot;</span>,
  <span class="token string">&quot;Blogs&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;abcops.cn&quot;</span>,
  <span class="token string">&quot;Is male&quot;</span><span class="token builtin class-name">:</span> true,
  <span class="token string">&quot;age&quot;</span><span class="token builtin class-name">:</span> <span class="token number">25</span>
<span class="token punctuation">}</span><span class="token string">'
PUTè¯·æ±‚æŒ‡å®š Document ID
#Kibana PUTè¯·æ±‚è¯­æ³•
PUT /index/_create/1
{
  &quot;name&quot;: &quot;WeiLiang Xu&quot;,
  &quot;Blogs&quot;: &quot;abcops.cn&quot;,
  &quot;Is male&quot;: true,
  &quot;age&quot;: 25
}

#Bash PUTè¯·æ±‚è¯­æ³•
curl -XPUT -u elastic:26tBktGolYCyZD2pPISW -H &quot;Content-Type:application/json&quot; '</span>http://192.168.31.215:9201/index/_create/1?pretty<span class="token string">' -d '</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;WeiLiang Xu&quot;</span>,
  <span class="token string">&quot;Blogs&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;abcops.cn&quot;</span>,
  <span class="token string">&quot;Is male&quot;</span><span class="token builtin class-name">:</span> true,
  <span class="token string">&quot;age&quot;</span><span class="token builtin class-name">:</span> <span class="token number">25</span>
<span class="token punctuation">}</span>'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br></div></div><h3 id="indexåˆ›å»ºç´¢å¼•æ–‡æ¡£æˆ–æ›´æ–°"><a href="#indexåˆ›å»ºç´¢å¼•æ–‡æ¡£æˆ–æ›´æ–°" class="header-anchor">#</a> <strong>Indexåˆ›å»ºç´¢å¼•æ–‡æ¡£æˆ–æ›´æ–°</strong></h3> <p>Indexè¯­æ³•å¯ä»¥æœ‰ä¸¤ç§HTTPè¯·æ±‚æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯ <code>POST</code>å’Œ<code>PUT</code>ï¼Œè¿™ç§è¯·æ±‚æ–¹æ³•é€šè¿‡è°ƒç”¨ <code>/index/_doc/id</code> è¯­æ³•ï¼ŒæŒ‡å®šäº† Document IDæ¥åˆ›å»ºæ–‡æ¡£ï¼Œå¦‚æœDocument IDä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºä¸ºæ–°çš„æ–‡æ¡£ï¼Œå¦‚æœIDå­˜åœ¨ï¼Œåˆ™åˆ é™¤ç°æœ‰IDååˆ›å»ºæ–°çš„æ–‡æ¡£ï¼ŒDocument Versionä¼šè¿›è¡Œ + 1ã€‚ Indexæ–¹å¼çš„åŸç†æ˜¯ï¼šå¦‚æœæ–‡æ¡£å·²å­˜åœ¨ï¼Œå…ˆåˆ é™¤åŸæœ‰æ–‡æ¡£ï¼Œç„¶åå†è¿›è¡Œæ–°å¢æ–‡æ¡£ï¼Œç‰ˆæœ¬+1ã€‚</p> <p><strong>å®ä¾‹</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#Kibanaæ“ä½œ</span>
POST /index/_doc/6              <span class="token comment">#PUTè¯­æ³•åªéœ€è¦æŠŠ POST æ”¹ä¸º PUTå³å¯</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;WeiLiang Xu&quot;</span>,
  <span class="token string">&quot;Blogs&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;abcops.cn&quot;</span>,
  <span class="token string">&quot;Is male&quot;</span><span class="token builtin class-name">:</span> true,
  <span class="token string">&quot;age&quot;</span><span class="token builtin class-name">:</span> <span class="token number">25</span>
<span class="token punctuation">}</span>

<span class="token comment">#Bashæ“ä½œ</span>
<span class="token function">curl</span> -XPUT -u elastic:26tBktGolYCyZD2pPISW -H <span class="token string">&quot;Content-Type:application/json&quot;</span> <span class="token string">'http://192.168.31.215:9201/index/_doc/6?pretty'</span> -d <span class="token string">'
{
  &quot;name&quot;: &quot;WeiLiang Xu&quot;,
  &quot;Blogs&quot;: &quot;abcops.cn&quot;,
  &quot;Is male&quot;: true,
  &quot;age&quot;: 25
}'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="readæŸ¥è¯¢æ–‡æ¡£"><a href="#readæŸ¥è¯¢æ–‡æ¡£" class="header-anchor">#</a> <strong>ReadæŸ¥è¯¢æ–‡æ¡£</strong></h3> <p>Readä¸ºè¯»å–æ–‡æ¡£å†…å®¹ï¼ŒReadä½¿ç”¨çš„HTTPè¯·æ±‚æ–¹å¼ä¸º GET ï¼Œ</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#Kibanaæ“ä½œ</span>
GET /index/_doc/1                   <span class="token comment">#æ“ä½œindexç´¢å¼•ä¸­Document IDä¸º1çš„æ–‡æ¡£</span>

<span class="token comment">#Bashæ“ä½œ</span>
<span class="token function">curl</span> -XGET -u elastic:26tBktGolYCyZD2pPISW <span class="token string">'http://192.168.31.215:9201/index/_doc/1?pretty'</span>

<span class="token comment">#æ›´å¤šçš„GETè¯­æ³•è§æ–‡ç« é¡¶éƒ¨</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="updateæ›´æ–°æ–‡æ¡£"><a href="#updateæ›´æ–°æ–‡æ¡£" class="header-anchor">#</a> <strong>Updateæ›´æ–°æ–‡æ¡£</strong></h3> <p>Updateæ–¹æ³•ä¸Indexä¸åŒçš„æ˜¯ï¼ŒUpdateåœ¨æ›´æ–°æ–‡æ¡£çš„æ—¶å€™ä¸ä¼šåˆ é™¤åŸæ¥çš„æ–‡æ¡£ï¼Œè€Œæ˜¯çœŸæ­£çš„æ›´æ–°æ•°æ®ã€‚ Updateæ›´æ–°çš„æ–‡æ¡£å¿…é¡»çœŸå®å­˜åœ¨ï¼ŒUpdateæ›´æ–°åªèƒ½å¯¹å­—æ®µè¿›è¡Œå¢é‡ä¿®æ”¹ï¼Œå¯¹å­—æ®µå€¼å¯ä»¥è¿›è¡Œéšæ„æ›´æ”¹ï¼Œä¸èƒ½å¯¹æ–‡æ¡£å­—æ®µè¿›è¡Œå‡å°‘æ›´æ–°ã€‚å¦‚æœä½ éœ€è¦å‡å°‘å­—æ®µï¼Œåˆ™ä½¿ç”¨Indexå»æ“ä½œæ–‡æ¡£ã€‚</p> <p><strong>å®ä¾‹</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#Kibanaæ“ä½œ</span>
POST /weiliang/_update/1
<span class="token punctuation">{</span>
  <span class="token string">&quot;doc&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token string">&quot;weiliang Xu&quot;</span>,<span class="token string">&quot;xueiliang&quot;</span><span class="token punctuation">]</span>,
  <span class="token string">&quot;JobS&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;Linux DevOps&quot;</span>,
  <span class="token string">&quot;Age&quot;</span><span class="token builtin class-name">:</span> <span class="token number">25</span>,
  <span class="token string">&quot;gender&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;man&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">#Bashæ“ä½œ</span>
<span class="token function">curl</span> -XPOST -u elastic:26tBktGolYCyZD2pPISW -H <span class="token string">&quot;Content-Type:application/json&quot;</span> <span class="token string">'http://192.168.31.215:9201/weiliang/_update/1?pretty'</span> -d <span class="token string">'
{
  &quot;doc&quot;: {
  &quot;name&quot;: [&quot;weiliang Xu&quot;,&quot;xueiliang&quot;],
  &quot;JobS&quot;: &quot;Linux DevOps&quot;,
  &quot;Age&quot;: 25,
  &quot;gender&quot;: &quot;man&quot;
  }
}'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="deleteåˆ é™¤æ–‡æ¡£"><a href="#deleteåˆ é™¤æ–‡æ¡£" class="header-anchor">#</a> <strong>Deleteåˆ é™¤æ–‡æ¡£</strong></h3> <p>Deleteå¯ä»¥æŒ‡å®šDocument IDåˆ é™¤æ–‡æ¡£ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åˆ é™¤ç´¢å¼•ï¼Œåˆ é™¤ç´¢å¼•ï¼Œç´¢å¼•å†…çš„æ–‡æ¡£éƒ½éšä¹‹è¢«åˆ é™¤ã€‚</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#Kibanaæ“ä½œ</span>
DELETE /weiliang/_doc/1         <span class="token comment">#åˆ é™¤æŒ‡å®šæ–‡æ¡£</span>
DELETE /weiliang                <span class="token comment">#åˆ é™¤ç´¢å¼•</span>

<span class="token comment">#Bashæ“ä½œ</span>
<span class="token function">curl</span> -XDELETE -u elastic:26tBktGolYCyZD2pPISW -H <span class="token string">&quot;Content-Type:application/json&quot;</span> <span class="token string">'http://192.168.31.215:9201/weiliang/_doc/1?pretty'</span>
<span class="token function">curl</span> -XDELETE -u elastic:26tBktGolYCyZD2pPISW -H <span class="token string">&quot;Content-Type:application/json&quot;</span> <span class="token string">'http://192.168.31.215:9201/weiliang?pretty'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="bulk-api-æ‰¹é‡æ“ä½œ"><a href="#bulk-api-æ‰¹é‡æ“ä½œ" class="header-anchor">#</a> <strong>Bulk API æ‰¹é‡æ“ä½œ</strong></h3> <ol><li>æ”¯æŒåœ¨ä¸€æ¬¡APIè°ƒç”¨ä¸­ï¼Œå¯¹ä¸åŒç´¢å¼•è¿›è¡Œæ“ä½œ</li> <li>æ”¯æŒå››ç§æ“ä½œ <code>Index</code>ã€<code>Create</code>ã€<code>Update</code>ã€<code>Delete</code></li> <li>å¯ä»¥åœ¨ URI ä¸­æŒ‡å®š Indexï¼Œä¹Ÿå¯ä»¥åœ¨è¯·æ±‚çš„ Playoad ä¸­è¿›è¡Œ</li> <li>æ“ä½œä¸­å•æ¡è¯­å¥æ“ä½œå¤±è´¥ï¼Œä¸ä¼šå½±å“åç»­æ“ä½œ</li> <li>è¿”å›ç»“æœåŒ…å«äº†æ¯ä¸€æ¡çš„æ‰§è¡Œç»“æœ</li></ol> <p><strong>å®ä¾‹</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code>#Kibanaæ“ä½œ
POST _bulk
<span class="token punctuation">{</span> <span class="token property">&quot;create&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;bulk_index&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;1&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>             <span class="token comment">//åˆ›å»ºäº†ç´¢å¼•ä¸º bulk_index ï¼Œidä¸º1çš„æ–‡æ¡£              </span>
<span class="token punctuation">{</span> <span class="token property">&quot;Job&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Linux Ops&quot;</span> <span class="token punctuation">}</span>                                             <span class="token comment">//æ–‡æ¡£å†…å®¹ä¸ºå­—æ®µ &quot;Job&quot; å€¼ &quot;Linux Ops&quot;</span>
<span class="token punctuation">{</span> <span class="token property">&quot;delete&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;bulk_index&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;2&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>             <span class="token comment">//åˆ é™¤ç´¢å¼•ä¸º bulk_index ä¸­ id ä¸º 2çš„æ–‡æ¡£ï¼Œå› ä¸ºæˆ‘ä»¬æš‚æ—¶è¿˜æ²¡æœ‰ id ä¸º2çš„æ–‡æ¡£ï¼Œæ‰€ä»¥æ­¤æ¬¡æ‰§è¡Œè¿”å› not_foundï¼Œä½†æ˜¯ä¸å½±å“åç»­è¯­å¥æ‰§è¡Œ</span>
<span class="token punctuation">{</span> <span class="token property">&quot;update&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;bulk_index&quot;</span>  <span class="token punctuation">}</span> <span class="token punctuation">}</span>             <span class="token comment">//å¢é‡æ›´æ–°äº† bulk_index ä¸­ id ä¸º 1 çš„æ–‡æ¡£ï¼Œæ³¨æ„è¿™é‡Œçš„å†™æ³•æ˜¯ _id åœ¨å‰ï¼Œ_index åœ¨å</span>
<span class="token punctuation">{</span> <span class="token property">&quot;doc&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;xuweiliang&quot;</span><span class="token punctuation">}</span> <span class="token punctuation">}</span>                                 
<span class="token punctuation">{</span> <span class="token property">&quot;index&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;bulk_index&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;1&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>               <span class="token comment">//Indexæ–¹å¼æ“ä½œäº† bulk_index ç´¢å¼•çš„ id ä¸º 1 çš„æ–‡æ¡£ï¼ŒæŠŠæ–‡æ¡£å†…å®¹æ”¹äº†å¦‚ä¸‹</span>
<span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;xuweiliang&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token property">&quot;create&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;bulk_index&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;2&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>             <span class="token comment">//åœ¨ bulk_index ç´¢å¼•ä¸­ åˆ›å»ºäº†ä¸€ä¸ª id ä¸º 2 çš„æ–‡æ¡£</span>
<span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;xuweiliang&quot;</span> <span class="token punctuation">,</span> <span class="token property">&quot;Age&quot;</span> <span class="token operator">:</span> <span class="token number">25</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token property">&quot;delete&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;bulk_index&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;2&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>             <span class="token comment">//åˆ é™¤äº† bulk_index ç´¢å¼•ä¸­ id ä¸º 2çš„æ–‡æ¡£</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>ä½¿ç”¨ <code>bulk api</code> æ‰¹é‡æ“ä½œçš„æ¯æ¡è¯­å¥éƒ½ä¼šè¿›è¡Œè¿”å›ç»“æœï¼Œå¦‚ä¸‹</p> <p><img src="https://blog-1305251267.cos.ap-shenzhen-fsi.myqcloud.com/img/v2-f728c69f7de0a15f5db4ae6b5b2a8f10_1440w.jpeg" alt="v2-f728c69f7de0a15f5db4ae6b5b2a8f10_1440w"></p> <h3 id="mget-æ‰¹é‡è¯»å–"><a href="#mget-æ‰¹é‡è¯»å–" class="header-anchor">#</a> <strong>MGET æ‰¹é‡è¯»å–</strong></h3> <p>Elasticsearchä¸­æä¾›äº† mget æ‰¹é‡è¯»å–çš„æ–¹å¼ï¼Œæ‰¹é‡æ“ä½œï¼Œå‡å°‘äº†ç½‘ç»œè¿æ¥æ‰€äº§ç”Ÿçš„å¼€é”€ã€‚æé«˜æ€§èƒ½</p> <p><strong>å®ä¾‹</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code>GET _mget
<span class="token punctuation">{</span>
  <span class="token property">&quot;docs&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>                                  <span class="token comment">//docsä¸ºmgetæ ¼å¼</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;bulk_index&quot;</span><span class="token punctuation">,</span>               <span class="token comment">//æŒ‡å®šè¦è¯»å–æ–‡æ¡£çš„ç´¢å¼•</span>
      <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token number">1</span>                             <span class="token comment">//æŒ‡å®šè¯»å–æ–‡æ¡£çš„ID</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;bulk_index&quot;</span><span class="token punctuation">,</span>               <span class="token comment">//åŒä¸€ç´¢å¼•å†…çš„ä¸åŒIDè”åˆè¯»å–</span>
      <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token number">2</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index&quot;</span><span class="token punctuation">,</span>                    <span class="token comment">//ä¸åŒç´¢å¼•ä¸­çš„ä¸åŒIDè”åˆè¯»å–</span>
      <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>ç»“æœå¦‚ä¸‹ï¼š</p> <p><img src="https://blog-1305251267.cos.ap-shenzhen-fsi.myqcloud.com/img/v2-6998bc028d76feabc71b2e5dbf732f9b_1440w.jpeg" alt="v2-6998bc028d76feabc71b2e5dbf732f9b_1440w"></p> <h3 id="msearch-æ‰¹é‡æŸ¥è¯¢"><a href="#msearch-æ‰¹é‡æŸ¥è¯¢" class="header-anchor">#</a> <strong>MSEARCH æ‰¹é‡æŸ¥è¯¢</strong></h3> <p>msearchå…¨ç§° Multi Serach APIæ˜¯ä¸€ä¸ªå¯ä»¥è¿›è¡Œæ¡ä»¶åŒ¹é…æŸ¥è¯¢çš„è¯­æ³• <code>GET /&lt;index&gt;/_msearch</code></p> <p><strong>ä»‹ç»</strong> mserachå®˜æ–¹è§£é‡Šè¯´ä»å•ä¸ªAPIä¸­è·å–å¤šä¸ªæœç´¢ç»“æœï¼Œè¯·æ±‚çš„æ ¼å¼ç±»ä¼¼äºæ‰¹é‡APIæ ¼å¼ï¼Œå¹¶ä½¿ç”¨æ¢è¡Œç¬¦åˆ†éš”çš„JSONï¼ˆNDJSONï¼‰æ ¼å¼ã€‚æœ€åä¸€è¡Œæ•°æ®å¿…é¡»ä»¥æ¢è¡Œç¬¦ \n ç»“å°¾ã€‚æ¯ä¸ªæ¢è¡Œç¬¦å‰é¢éƒ½å¯ä»¥æœ‰ä¸€ä¸ªå›è½¦ç¬¦ \rã€‚å‘æ­¤ç«¯ç‚¹å‘é€è¯·æ±‚æ—¶ï¼ŒContent-Typeæ ‡å¤´åº”è®¾ç½®ä¸º<code>application/x-ndjson</code></p> <p><strong>è·¯å¾„å‚æ•°</strong> <index> ï¼ˆå¯é€‰ï¼Œå­—ç¬¦ä¸²ï¼‰ç´¢å¼•åç§°çš„é€—å·åˆ†éš”åˆ—è¡¨æˆ–é€šé…ç¬¦è¡¨è¾¾å¼ï¼Œç”¨äºé™åˆ¶è¯·æ±‚ã€‚</index></p> <p><strong>è¯·æ±‚ä¸»ä½“</strong> 1.<code>aggregations</code>èšåˆ ï¼ˆå¯é€‰ï¼Œå¯¹è±¡ï¼‰æŒ‡å®šèšåˆã€‚</p> <p>2.<code>from</code> æ¥è‡ª ï¼ˆå¯é€‰ï¼Œæ•´æ•°ï¼‰èµ·å§‹æ–‡æ¡£åç§»é‡ã€‚é¢„è®¾ä¸º0ã€‚</p> <p>3.<code>max_concurrent_searches</code>åŒæ—¶æœ€å¤šæŸ¥è¯¢ ï¼ˆå¯é€‰ï¼Œæ•´æ•°ï¼‰æŒ‡å®šå¤šé‡æœç´¢APIå°†æ‰§è¡Œçš„å¹¶å‘æœç´¢çš„æœ€å¤§æ•°é‡,æ­¤é»˜è®¤å€¼åŸºäºæ•°æ®èŠ‚ç‚¹çš„æ•°é‡å’Œé»˜è®¤æœç´¢çº¿ç¨‹æ± å¤§å°ã€‚</p> <p>4.<code>max_concurrent_shard_requests</code> ï¼ˆå¯é€‰ï¼Œæ•´æ•°ï¼‰æŒ‡å®šæ¯ä¸ªå­æœç´¢è¯·æ±‚å°†åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šæ‰§è¡Œçš„å¹¶å‘åˆ†ç‰‡è¯·æ±‚çš„æœ€å¤§æ•°é‡ã€‚æ­¤å‚æ•°åº”ç”¨äºä¿æŠ¤å•ä¸ªè¯·æ±‚ï¼Œä»¥é˜²æ­¢é›†ç¾¤è¿‡è½½ï¼ˆä¾‹å¦‚ï¼Œé»˜è®¤è¯·æ±‚å°†å‘½ä¸­é›†ç¾¤ä¸­çš„æ‰€æœ‰ç´¢å¼•ï¼Œå¦‚æœæ¯ä¸ªèŠ‚ç‚¹çš„åˆ†ç‰‡æ•°é‡å¾ˆé«˜ï¼Œåˆ™å¯èƒ½å¯¼è‡´åˆ†ç‰‡è¯·æ±‚è¢«æ‹’ç»ï¼‰ã€‚é»˜è®¤ä¸º5ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¹¶å‘è¯·æ±‚æ— æ³•å®ç°å¹¶è¡Œæ€§ï¼Œå› æ­¤è¿™ç§ä¿æŠ¤å°†å¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚ä¾‹å¦‚ï¼Œåœ¨ä»…æœŸæœ›å¾ˆå°‘æ•°é‡çš„å¹¶å‘æœç´¢è¯·æ±‚çš„ç¯å¢ƒä¸­ï¼Œå¯èƒ½æœ‰åŠ©äºå°†è¯¥å€¼å¢åŠ åˆ°æ›´å¤§çš„æ•°ç›®ã€‚</p> <p>5.<code>preference</code> ï¼ˆå¯é€‰ï¼Œå­—ç¬¦ä¸²ï¼‰æŒ‡å®šåº”è¯¥å¯¹å…¶æ‰§è¡Œæ“ä½œçš„èŠ‚ç‚¹æˆ–åˆ†ç‰‡ã€‚é»˜è®¤ä¸ºéšæœºã€‚</p> <p>6.<code>query</code> ï¼ˆå¯é€‰ï¼ŒæŸ¥è¯¢å¯¹è±¡ï¼‰ä½¿ç”¨æŸ¥è¯¢DSLå®šä¹‰æœç´¢å®šä¹‰ã€‚</p> <p>7.<code>routing</code> ï¼ˆå¯é€‰ï¼Œå­—ç¬¦ä¸²ï¼‰ä»¥æŒ‡å®šçš„ä¸»åˆ†ç‰‡ä¸ºç›®æ ‡ã€‚</p> <p>8.<code>search_type</code> ï¼ˆå¯é€‰ï¼Œå­—ç¬¦ä¸²ï¼‰æœç´¢æ“ä½œçš„ç±»å‹ã€‚å¯ç”¨é€‰é¡¹ï¼š</p> <ul><li>query_then_fetch</li> <li>dfs_query_then_fetch</li></ul> <p>9.<code>size</code> ï¼ˆå¯é€‰ï¼Œæ•´æ•°ï¼‰è¦è¿”å›çš„ç‚¹å‡»æ•°ã€‚é»˜è®¤ä¸º10ã€‚</p> <p><strong>å“åº”æ­£æ–‡</strong> <code>responses</code> ï¼ˆæ•°ç»„ï¼‰åŒ…æ‹¬ä¸åŸå§‹å¤šé‡æœç´¢è¯·æ±‚ä¸­çš„é¡ºåºåŒ¹é…çš„æ¯ä¸ªæœç´¢è¯·æ±‚çš„æœç´¢å“åº”å’ŒçŠ¶æ€ä»£ç ã€‚å¦‚æœç‰¹å®šæœç´¢è¯·æ±‚å®Œå…¨å¤±è´¥ï¼Œerroråˆ™å°†è¿”å›å¸¦æœ‰æ¶ˆæ¯å’Œç›¸åº”çŠ¶æ€ä»£ç çš„å¯¹è±¡ï¼Œä»£æ›¿å®é™…çš„æœç´¢å“åº”ã€‚</p> <p><strong>å®ä¾‹</strong> æ ‡å¤´éƒ¨åˆ†åŒ…æ‹¬è¦æœç´¢çš„ä¸€ä¸ªæˆ–å¤šä¸ªç´¢å¼•ï¼Œsearch_typeï¼Œé¦–é€‰é¡¹å’Œè·¯ç”±ã€‚è¯¥æ­£æ–‡åŒ…æ‹¬å…¸å‹çš„æœç´¢æ­£æ–‡è¯·æ±‚ï¼ˆåŒ…æ‹¬æŸ¥è¯¢ï¼Œèšåˆï¼Œæ¥æºï¼Œå¤§å°ç­‰ï¼‰ã€‚</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code>$ cat requests
<span class="token punctuation">{</span><span class="token property">&quot;index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;index&quot;</span><span class="token punctuation">}</span>              
<span class="token punctuation">{</span><span class="token property">&quot;query&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">&quot;match_all&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token property">&quot;from&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token property">&quot;size&quot;</span> <span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token property">&quot;index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;search_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;dfs_query_then_fetch&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token property">&quot;query&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">&quot;match_all&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token property">&quot;query&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">&quot;match_all&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>

<span class="token punctuation">{</span><span class="token property">&quot;query&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">&quot;match_all&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token property">&quot;search_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;dfs_query_then_fetch&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token property">&quot;query&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">&quot;match_all&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="å¸¸è§é”™è¯¯è¿”å›"><a href="#å¸¸è§é”™è¯¯è¿”å›" class="header-anchor">#</a> <strong>å¸¸è§é”™è¯¯è¿”å›</strong></h3> <p><strong>é—®é¢˜åŸå› </strong>æ— æ³•è¿æ¥ç½‘ç»œæ•…éšœæˆ–é›†ç¾¤æŒ‚äº†è¿æ¥æ— æ³•å…³é—­ç½‘ç»œæ•…éšœæˆ–èŠ‚ç‚¹å‡ºé”™429é›†ç¾¤è¿‡äºç¹å¿™4xxè¯·æ±‚ä½“æ ¼å¼é”™è¯¯500é›†ç¾¤å†…éƒ¨é”™è¯¯</p> <h2 id="å¸¸ç”¨å¿«æ·shellå¤„ç†"><a href="#å¸¸ç”¨å¿«æ·shellå¤„ç†" class="header-anchor">#</a> å¸¸ç”¨å¿«æ·shellå¤„ç†</h2> <h3 id="æ‰¹é‡é™å‰¯æœ¬"><a href="#æ‰¹é‡é™å‰¯æœ¬" class="header-anchor">#</a> æ‰¹é‡é™å‰¯æœ¬</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>
<span class="token function">curl</span> http://localhost:9200/_cat/indices?v <span class="token operator">|</span> <span class="token function">grep</span> <span class="token function">open</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;gb &quot;</span> <span class="token operator">|</span> <span class="token function">sort</span> -k9 <span class="token operator">|</span> <span class="token function">grep</span> api_nginx_access <span class="token operator">|</span> <span class="token keyword">while</span> <span class="token builtin class-name">read</span> col st index other<span class="token punctuation">;</span>

<span class="token keyword">do</span>

 <span class="token function">curl</span> -XPUT -H<span class="token string">&quot;Content-Type: application/json; charset=utf-8&quot;</span> http://localhost:9200/<span class="token variable">$index</span>/_settings -d<span class="token string">'{&quot;index&quot;: {&quot;number_of_replicas&quot;: &quot;0&quot;}}'</span><span class="token punctuation">;</span>

<span class="token keyword">done</span><span class="token punctuation">;</span>


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="åˆ›å»ºè´¦å·å¯†ç "><a href="#åˆ›å»ºè´¦å·å¯†ç " class="header-anchor">#</a> åˆ›å»ºè´¦å·å¯†ç </h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">curl</span> -X <span class="token string">&quot;POST&quot;</span> <span class="token string">&quot;http://loclahost:9200/_security/user/test&quot;</span> <span class="token punctuation">\</span>
     -H <span class="token string">'Content-Type: application/json; charset=utf-8'</span> <span class="token punctuation">\</span>
     -u <span class="token string">'elastic:password'</span> <span class="token punctuation">\</span>
     -d <span class="token string">$'{
  &quot;password&quot;: &quot;xxxxxxxx-xxxxxxxxx&quot;,
  &quot;full_name&quot;: &quot;test&quot;,
  &quot;roles&quot;: [
    &quot;superuser&quot;
  ],
  &quot;email&quot;: &quot;test@xx.com&quot;
}'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="æ¸…ç†ç´¢å¼•"><a href="#æ¸…ç†ç´¢å¼•" class="header-anchor">#</a> æ¸…ç†ç´¢å¼•</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#æ¸…ç†skywalking ç´¢å¼•</span>
<span class="token function">curl</span> -s -XGET -u user:passwod http://localhost:9200/_cat/indices<span class="token operator">|</span><span class="token function">grep</span> -E <span class="token string">'skywalk_[a-zA-Z_]+-20210[0-4][0-9]{0,2}'</span> <span class="token operator">|</span><span class="token function">awk</span> <span class="token string">'{print $3}'</span><span class="token operator">|</span><span class="token keyword">while</span> <span class="token builtin class-name">read</span> index
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;[<span class="token variable"><span class="token variable">`</span><span class="token function">date</span> +<span class="token string">&quot;%Y-%m-%d %H:%M:%S&quot;</span><span class="token variable">`</span></span>] INFO delete index: <span class="token variable">$index</span>&quot;</span>
    <span class="token function">curl</span> -s -XDELETE -u user:passwod http://localhost:9200/<span class="token variable">$index</span>   
<span class="token keyword">done</span>

<span class="token comment"># å¸¸ç”¨çš„æ—¥æœŸæ­£åˆ™</span>
<span class="token function">egrep</span> <span class="token string">'14-DI_SEQ_SQL_SUBSCRIBE_LIBRARY-202108(0[1-9]|1[1-5])'</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="ç»Ÿè®¡æŸç±»ç´¢å¼•ç©ºé—´å¤§å°"><a href="#ç»Ÿè®¡æŸç±»ç´¢å¼•ç©ºé—´å¤§å°" class="header-anchor">#</a> ç»Ÿè®¡æŸç±»ç´¢å¼•ç©ºé—´å¤§å°</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">curl</span> -s -XGET -u user:password <span class="token string">&quot;http://localhost:9200/_cat/indices/skywalk*?v&amp;bytes=gb&amp;s=store.size:desc&amp;h=store.size&quot;</span><span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $1}'</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{sum+=$1}END{print sum}'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="elasticsearchæŸ¥è¯¢æ–‡æ¡£æ€»æ•°"><a href="#elasticsearchæŸ¥è¯¢æ–‡æ¡£æ€»æ•°" class="header-anchor">#</a> <a href="https://www.cnblogs.com/jamh/p/14975903.html" target="_blank" rel="noopener noreferrer">ElasticsearchæŸ¥è¯¢æ–‡æ¡£æ€»æ•°<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3></div></div> <div class="page-slot page-slot-bottom"><!-- æ¨ªå‘è‡ªé€‚åº” -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6620245489"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/chenhaipeng/edit/master/docs/02.å¤§æ•°æ®/01.Elasticsearchæ–‡ç« /05.Elasticsearch å¸¸ç”¨å‘½ä»¤.md" target="_blank" rel="noopener noreferrer">ç¼–è¾‘</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">2022/05/04, 16:44:21</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/aa5cb7/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Elasticsearch æ¶æ„</div></a> <a href="/pages/c0183f/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Elasticsearch é›†ç¾¤è¿ç§»</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/pages/aa5cb7/" class="prev">Elasticsearch æ¶æ„</a></span> <span class="next"><a href="/pages/c0183f/">Elasticsearch é›†ç¾¤è¿ç§»</a>â†’
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">æœ€è¿‘æ›´æ–°</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/b36b1d/"><div>
            å•ä¾‹æ¨¡å¼
            <!----></div></a> <span class="date">06-13</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/baaad2/"><div>
            ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼
            <!----></div></a> <span class="date">06-13</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/4bb148/"><div>
            æ€§èƒ½æµ‹è¯•ä¸€äº›æ¦‚å¿µ
            <!----></div></a> <span class="date">06-13</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">æ›´å¤šæ–‡ç« &gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:369161356@qq.com" title="å‘é‚®ä»¶" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/chenhaipeng" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="æœ¬ç«™ä¸»é¢˜">Vdoing</a> 
    | Copyright Â© 2021-2022
    <span>Hiper | <a href="https://github.com/chenhaipeng/chenhaipeng.github.io/blob/main/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="è¿”å›é¡¶éƒ¨" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="å»è¯„è®º" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="ä¸»é¢˜æ¨¡å¼" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          è·Ÿéšç³»ç»Ÿ
        </li><li class="iconfont icon-rijianmoshi">
          æµ…è‰²æ¨¡å¼
        </li><li class="iconfont icon-yejianmoshi">
          æ·±è‰²æ¨¡å¼
        </li><li class="iconfont icon-yuedu">
          é˜…è¯»æ¨¡å¼
        </li></ul></div></div> <!----> <!----> <div class="custom-html-window custom-html-window-rb" style="display:;"><div class="custom-wrapper"><span class="close-but">Ã—</span> <div><!-- å›ºå®š160*160px -->
      <ins class="adsbygoogle"
          style="display:inline-block;max-width:160px;max-height:160px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="8377369658"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      </div></div></div></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.d3e05205.js" defer></script><script src="/assets/js/2.fe8aed19.js" defer></script><script src="/assets/js/16.3a2f9fc9.js" defer></script>
  </body>
</html>
